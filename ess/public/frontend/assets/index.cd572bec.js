var h=(n,o,r)=>new Promise((t,e)=>{var s=c=>{try{u(r.next(c))}catch(d){e(d)}},i=c=>{try{u(r.throw(c))}catch(d){e(d)}},u=c=>c.done?t(c.value):Promise.resolve(c.value).then(s,i);u((r=r.apply(n,o)).next())});import{c as f,r as y,a as v,b as E,d as P,_ as A,e as k,f as R,g as O,o as b,h as w,s as C,i as I,B as j,C as D,D as H,j as S}from"./vendor.27671223.js";const B=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}};B();const N="modulepreload",L={},U="/assets/ess/frontend/",p=function(o,r){return!r||r.length===0?o():Promise.all(r.map(t=>{if(t=`${U}${t}`,t in L)return;L[t]=!0;const e=t.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":N,e||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),e)return new Promise((u,c)=>{i.addEventListener("load",u),i.addEventListener("error",c)})})).then(()=>o())},g=f({url:"frappe.auth.get_logged_user",cache:"User",onError(n){n&&n.exc_type==="AuthenticationError"&&m.push({name:"LoginPage"})}});function _(){let o=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return o==="Guest"&&(o=null),o}const l=y({login:f({url:"login",makeParams({email:n,password:o}){return{usr:n,pwd:o}},onSuccess(n){g.reload(),l.user=_(),l.login.reset(),m.replace(n.default_route||"/")}}),logout:f({url:"logout",onSuccess(){g.reset(),l.user=_(),m.replace({name:"Login"})}}),user:_(),isLoggedIn:v(()=>!!l.user)}),V=[{path:"/",name:"Home",component:()=>p(()=>import("./Home.2ca3be63.js"),["assets/Home.2ca3be63.js","assets/vendor.27671223.js","assets/vendor.11acc114.css"])},{name:"Login",path:"/account/login",component:()=>p(()=>import("./Login.112d2572.js"),["assets/Login.112d2572.js","assets/vendor.27671223.js","assets/vendor.11acc114.css"])},{name:"Action",path:"/ActionHome",component:()=>p(()=>import("./ActionHome.0326032d.js"),["assets/ActionHome.0326032d.js","assets/vendor.27671223.js","assets/vendor.11acc114.css"])}];let m=E({history:P("/frontend"),routes:V});m.beforeEach((n,o,r)=>h(void 0,null,function*(){let t=l.isLoggedIn;try{yield g.promise}catch(e){t=!1}n.name==="Login"&&t?r({name:"Home"}):n.name!=="Login"&&!t?r({name:"Login"}):r()}));const $={};function q(n,o){const r=O("router-view");return b(),k("div",null,[R(r)])}var x=A($,[["render",q]]);let a=w(x);C("resourceFetcher",S);a.use(m);a.use(I);a.component("Button",j);a.component("Card",D);a.component("Dialog",H);a.mount("#app");export{m as r,l as s};
